{"version":3,"sources":["ui/UIContext.ts"],"names":["UIContext","UIContext.constructor","UIContext.getServices","UIContext.getService","UIContext.connect","UIContext.setDataflow","UIContext.loadDataflow","UIContext.getDataflowsString","UIContext.getDataflowString","UIContext.setStructure","UIContext.getServicesComponent","UIContext.getDataflowsComponent","UIContext.setServicesComponent","UIContext.setDataflowsComponent","Singleton","Singleton.constructor","Singleton.getUIContext","getUIContext"],"mappings":"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","file":"ui/UIContext.js","sourcesContent":["/// <amd-module name='ui/UIContext'/>\nimport interfaces = require(\"../sdmx/interfaces\");\nimport sdmx = require(\"../sdmx\");\nimport structure = require(\"../sdmx/structure\");\nimport commonreferences = require(\"../sdmx/commonreferences\");\n\nexport class UIContext {\n    private services = sdmx.SdmxIO.listServices();\n    private service: string = this.services[0];\n    private queryable: interfaces.Queryable = null;\n    private dataflows: Array<structure.Dataflow> = null;\n    private dataflowsString: Array<string> = [];\n    private dataflow: structure.Dataflow = null;\n    private structureRef: commonreferences.Reference = null;\n\n    private servicesComponent: any = null;\n    private dataflowsComponent: any = null;\n\n    constructor() {\n\n    }\n    getServices() { return this.services; }\n    getService() {\n        return this.service;\n    }\n    connect(s: string) {\n        this.queryable = sdmx.SdmxIO.connect(s);\n        var dfc:any = this.dataflowsComponent;\n        this.queryable.getRemoteRegistry().listDataflows().then(function(dfs) {\n            this.dataflows = dfs;\n            this.dataflowsString = [];\n            for (var i: number = 0; i < this.dataflows.length; i++) {\n                this.dataflowsString.push(structure.NameableType.toString(this.dataflows[i]));\n            }\n            alert(JSON.stringify(dfc));\n            dfc.setState({dataflows:this.getDataflowsString()});\n            this.setDataflow(this.dataflows[0]);\n        }.bind(this));\n    }\n    setDataflow(df: structure.Dataflow) {\n        if (df == null) return;\n        this.dataflow = df;\n        this.setStructure(this.dataflow.getStructure());\n    }\n    loadDataflow(s: string) {\n        for (var i: number = 0; i < this.dataflows.length; i++) {\n            if (s == structure.NameableType.toString(this.dataflows[i])) {\n                this.setDataflow(this.dataflows[i]);\n            }\n        }\n    }\n    getDataflowsString() {\n        return this.dataflowsString;\n    }\n    getDataflowString() {\n        if (this.dataflow == null) return \"\";\n        return structure.NameableType.toString(this.dataflow);\n    }\n    setStructure(ref: commonreferences.Reference) {\n        this.structureRef = ref;\n    }\n    public getServicesComponent() {\n        return this.servicesComponent;\n    }\n    public getDataflowsComponent() {\n        return this.dataflowsComponent;\n    }\n    public setServicesComponent(a:any) {\n        this.servicesComponent=a;\n    }\n    public setDataflowsComponent(a:any) {\n        this.dataflowsComponent=a;\n    }\n\n\n}\nexport class Singleton {\n    // Singleton\n    private static UIContext = new UIContext();\n    public static getUIContext() {\n        return Singleton.UIContext;\n    }\n}\nexport function getUIContext(): UIContext {\n    return Singleton.getUIContext();\n}"],"sourceRoot":"/source/"}