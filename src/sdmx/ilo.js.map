{"version":3,"sources":["sdmx/ilo.ts"],"names":[],"mappings":"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","file":"ilo.js","sourcesContent":["/*\n    This file is part of sdmx-js.\n\n    sdmx-js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    sdmx-js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with sdmx-js.  If not, see <http://www.gnu.org/licenses/>.\n    Copyright (C) 2016 James Gardner\n*/\n///<reference path=\"../bluebird.d.ts\"/>\nimport interfaces = require(\"sdmx/interfaces\");\nimport registry = require(\"sdmx/registry\");\nimport structure = require(\"sdmx/structure\");\nimport message = require(\"sdmx/message\");\nimport commonreferences = require(\"sdmx/commonreferences\");\nimport common = require(\"sdmx/common\");\nimport data = require(\"sdmx/data\");\nimport sdmx = require(\"sdmx\");\nexport class ILO implements interfaces.Queryable, interfaces.RemoteRegistry, interfaces.Repository {\n    private agency: string = \"ILO\";\n    //http://stats.oecd.org/restsdmx/sdmx.ashx/GetDataStructure/ALL/OECD\n    private serviceURL: string = \"http://cors-anywhere.herokuapp.com/http://www.ilo.org/ilostat/sdmx/ws/rest\";\n    //private serviceURL: string = \"http://stat.abs.gov.au/restsdmx/sdmx.ashx/\";\n    private options: string = \"\";\n    private local: interfaces.LocalRegistry = new registry.LocalRegistry();\n\n    private dataflowList: Array<structure.Dataflow> = null;\n    private classifications: structure.Codelist = null;\n    private indicatorsArrayCodelist: Array<structure.Codelist> = [];\n\n    getRemoteRegistry(): interfaces.RemoteRegistry {\n        return this;\n    }\n\n    getRepository(): interfaces.Repository {\n        return this;//this;\n        \n    }\n\n    clear() {\n        this.local.clear();\n    }\n    query(q: data.Query): Promise<message.DataMessage> {\n        var url = this.serviceURL + \"/data/\" + q.getDataflow().getId().toString() + \"/\" + q.getQueryString() + \"/all?startPeriod=\" + q.getStartDate().getFullYear() + \"&endPeriod=\" + q.getEndDate().getFullYear();\n        return this.retrieveData(q.getDataflow(), url);\n    }\n    public retrieveData(dataflow: structure.Dataflow, urlString: string): Promise<message.DataMessage> {\n        console.log(\"ilo retrieveData:\" + urlString);\n        var s: string = this.options;\n        if (urlString.indexOf(\"?\") == -1) {\n            s = \"?\" + s + \"&random=\" + new Date().getTime();\n        } else {\n            s = \"&\" + s + \"&random=\" + new Date().getTime();\n        }\n        var opts: any = {};\n        opts.url = urlString;\n        opts.method = \"GET\";\n        opts.headers = { \"Origin\": document.location };\n        return this.makeRequest(opts).then(function(a) {\n            console.log(\"Got Data Response\");\n            var dm = sdmx.SdmxIO.parseData(a);\n            var payload = new common.PayloadStructureType();\n            payload.setStructure(dataflow.getStructure());\n            dm.getHeader().setStructures([payload]);\n            return dm;\n        });\n    }\n    constructor(agency: string, service: string, options: string) {\n        if (service != null) { this.serviceURL = service; }\n        if (agency != null) { this.agency = agency; }\n        if (options != null) { this.options = options; }\n    }\n\n    load(struct: message.StructureType) {\n        console.log(\"abs load\");\n        this.local.load(struct);\n    }\n\n    unload(struct: message.StructureType) {\n        this.local.unload(struct);\n    }\n    makeRequest(opts): Promise<string> {\n        return new Promise<string>(function(resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            xhr.open(opts.method, opts.url);\n            xhr.onload = function() {\n                if (this.status >= 200 && this.status < 300) {\n                    resolve(xhr.response);\n                } else {\n                    reject({\n                        status: this.status,\n                        statusText: xhr.statusText\n                    });\n                }\n            };\n            xhr.onerror = function() {\n                reject({\n                    status: this.status,\n                    statusText: xhr.statusText\n                });\n            };\n            if (opts.headers) {\n                Object.keys(opts.headers).forEach(function(key) {\n                    xhr.setRequestHeader(key, opts.headers[key]);\n                });\n            }\n            var params = opts.params;\n            // We'll need to stringify if we've been given an object\n            // If we have a string, this is skipped.\n            if (params && typeof params === 'object') {\n                params = Object.keys(params).map(function(key) {\n                    return encodeURIComponent(key) + '=' + encodeURIComponent(params[key]);\n                }).join('&');\n            }\n            xhr.send(params);\n        });\n    }\n    public retrieve(urlString: string): Promise<message.StructureType> {\n        console.log(\"nomis retrieve:\" + urlString);\n        var s: string = this.options;\n        if (urlString.indexOf(\"?\") == -1) {\n            s = \"?\" + s + \"&random=\" + new Date().getTime();\n        } else {\n            s = \"&\" + s + \"&random=\" + new Date().getTime();\n        }\n        var opts: any = {};\n        opts.url = urlString;\n        opts.method = \"GET\";\n        opts.headers = { \"Origin\": document.location };\n        return this.makeRequest(opts).then(function(a) {\n            return sdmx.SdmxIO.parseStructure(a);\n        });\n    }\n    public retrieve2(urlString: string): Promise<string> {\n        console.log(\"nomis retrieve:\" + urlString);\n        var s: string = this.options;\n        if (urlString.indexOf(\"?\") == -1) {\n            s = \"?\" + s + \"&random=\" + new Date().getTime();\n        } else {\n            s = \"&\" + s + \"&random=\" + new Date().getTime();\n        }\n        var opts: any = {};\n        opts.url = urlString;\n        opts.method = \"GET\";\n        opts.headers = { \"Origin\": document.location };\n        return this.makeRequest(opts).then(function(a) {\n            return a;\n        });\n    }\n\n    public findDataStructure(ref: commonreferences.Reference): Promise<structure.DataStructure> {\n        var dst: structure.DataStructure = this.local.findDataStructure(ref);\n        if (dst != null) {\n            var promise = new Promise<structure.DataStructure>(function(resolve, reject) {\n                resolve(dst);\n            }.bind(this));\n            return promise;\n        } else {\n            return <Promise<structure.DataStructure>>this.retrieve(this.getServiceURL() + \"/datastructure/\" + ref.getAgencyId().toString() + \"/\" + ref.getMaintainableParentId().toString() + \"?references=children\").then(function(structure: message.StructureType) {\n                this.local.load(structure);\n                return structure.getStructures().findDataStructure(ref);\n            }.bind(this));\n        }\n    }\n\n\n\n\n    public listDataflows(): Promise<any> {\n        if (this.dataflowList != null) {\n            var promise = new Promise<Array<structure.Dataflow>>(function(resolve, reject) {\n                resolve(this.dataflowList);\n            }.bind(this));\n            return promise;\n        } else {\n            var r: commonreferences.Ref = new commonreferences.Ref();\n            r.setAgencyId(new commonreferences.NestedNCNameID(this.agency));\n            r.setMaintainableParentId(new commonreferences.ID(\"CL_COLLECTION\"));\n            r.setVersion(null);\n            var ref: commonreferences.Reference = new commonreferences.Reference(r, null);\n            var prom: Promise<any> = this.findCodelist(ref);\n            var dataflowList: Array<structure.Dataflow> = [];\n            var indicatorsCodelist = [];\n            return prom.then(function(classifications: any) {\n                this.classifications = classifications;\n                var indicatorsArray = [];\n                for (var i: number = 0; i < classifications.size(); i++) {\n                    var code: structure.CodeType = <structure.CodeType>classifications.getItem(i);\n                    var cod: string = code.getId().toString();\n                    var r2: commonreferences.Ref = new commonreferences.Ref();\n                    r2.setAgencyId(new commonreferences.NestedNCNameID(this.agency));\n                    r2.setMaintainableParentId(new commonreferences.ID(\"CL_INDICATOR_\" + cod));\n                    r2.setVersion(null);\n                    var ref: commonreferences.Reference = new commonreferences.Reference(r2, null);\n                    indicatorsArray.push(ref);\n                }\n                return indicatorsArray;\n            }.bind(this)).map(function(item, idex, length) {\n                return this.findCodelist(item);\n            }.bind(this)).then(function(indicatorArray: any) {\n                this.indicatorsArrayCodelist = indicatorArray;\n                console.log(JSON.stringify(indicatorArray));\n                var indic: structure.Codelist = null;\n                var dataflowList: Array<structure.Dataflow> = [];\n                for (var i: number = 0; i < this.classifications.size(); i++) {\n                    var col1 = this.classifications.getItem(i);\n                    var con = col1.getId().toString();\n                    indic = this.indicatorsArrayCodelist[i];\n                    for (var k = 0; k < indic.size(); k++) {\n                        var dataflow = new structure.Dataflow();\n                        dataflow.setAgencyId(this.classifications.getAgencyId());\n                        var indicid: string = indic.getItem(k).getId().toString();\n                        dataflow.setId(new commonreferences.ID(\"DF_\" + con + \"_ALL_\" + indicid));\n                        dataflow.setVersion(null);\n                        var r3: commonreferences.Ref = new commonreferences.Ref();\n                        r3.setAgencyId(this.classifications.getAgencyId());\n                        r3.setMaintainableParentId(new commonreferences.ID(con + \"_ALL_\" + indicid));\n                        r3.setVersion(null);\n                        var names: Array<common.Name> = [];\n                        var langs = [\"en\", \"fr\", \"es\"];\n                        for (var lang: number = 0; lang < langs.length; lang++) {\n                            var name: common.Name = new common.Name(langs[lang], col1.findName(langs[lang]).getText() + \" - \" + indic.getItem(k).findName(langs[lang]).getText());\n                            names.push(name);\n                        }\n                        dataflow.setNames(names);\n                        var reference: commonreferences.Reference = new commonreferences.Reference(r3, null);\n                        dataflow.setStructure(reference);\n                        dataflowList.push(dataflow);\n                    }\n                }\n                this.dataflowList = dataflowList;\n                return this.dataflowList;\n            }.bind(this));\n        }\n    }\n    public getServiceURL(): string { return this.serviceURL; }\n    findDataflow(ref: commonreferences.Reference): Promise<structure.Dataflow> { return null; }\n    findCode(ref: commonreferences.Reference): Promise<structure.CodeType> { return null; }\n    findCodelist(ref: commonreferences.Reference): Promise<structure.Codelist> {\n        var dst: structure.Codelist = this.local.findCodelist(ref);\n        if (dst != null) {\n            var promise = new Promise<structure.Codelist>(function(resolve, reject) {\n                resolve(dst);\n            }.bind(this));\n            return promise;\n        } else {\n            return <Promise<structure.Codelist>>this.retrieve(this.getServiceURL() + \"/codelist/\" + ref.getAgencyId().toString() + \"/\" + ref.getMaintainableParentId() + (ref.getVersion() == null ? \"/latest\" : ref.getVersion().toString())).then(function(structure: message.StructureType) {\n                this.local.load(structure);\n                var cl: structure.Codelist = structure.getStructures().findCodelist(ref);\n                return cl;\n            }.bind(this));\n        }\n    }\n    findItemType(item: commonreferences.Reference): Promise<structure.ItemType> { return null; }\n    findConcept(ref: commonreferences.Reference): Promise<structure.ConceptType> { return null; }\n    findConceptScheme(ref: commonreferences.Reference): Promise<structure.ConceptSchemeType> {\n        var dst: structure.ConceptSchemeType = this.local.findConceptScheme(ref);\n        if (dst != null) {\n            var promise = new Promise<structure.ConceptSchemeType>(function(resolve, reject) {\n                resolve(dst);\n            }.bind(this));\n            return promise;\n        } else {\n            return <Promise<structure.ConceptSchemeType>>this.retrieve(this.getServiceURL() + \"/conceptscheme/\" + ref.getAgencyId().toString() + \"/\" + ref.getMaintainableParentId() + (ref.getVersion() == null ? \"/latest\" : ref.getVersion().toString())).then(function(structure: message.StructureType) {\n                this.local.load(structure);\n                return structure.getStructures().findConceptScheme(ref);\n            }.bind(this));\n        }\n    }\n    searchDataStructure(ref: commonreferences.Reference): Promise<Array<structure.DataStructure>> { return null; }\n    searchDataflow(ref: commonreferences.Reference): Promise<Array<structure.Dataflow>> { return null; }\n    searchCodelist(ref: commonreferences.Reference): Promise<Array<structure.Codelist>> { return null; }\n    searchItemType(item: commonreferences.Reference): Promise<Array<structure.ItemType>> { return null; }\n    searchConcept(ref: commonreferences.Reference): Promise<Array<structure.ConceptType>> { return null; }\n    searchConceptScheme(ref: commonreferences.Reference): Promise<Array<structure.ConceptSchemeType>> { return null; }\n    getLocalRegistry(): interfaces.LocalRegistry {\n        return this.local;\n    }\n    save(): any { }\n}\n"]}