{"version":3,"sources":["sdmx/nomis.ts"],"names":[],"mappings":"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","file":"nomis.js","sourcesContent":["/*\n    This file is part of sdmx-js.\n\n    sdmx-js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    sdmx-js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with sdmx-js.  If not, see <http://www.gnu.org/licenses/>.\n    Copyright (C) 2016 James Gardner\n*/\n///<reference path=\"../bluebird.d.ts\"/>\n///<reference path=\"../moment.d.ts\"/>\nimport moment = require(\"moment\");\nimport interfaces = require(\"sdmx/interfaces\");\nimport registry = require(\"sdmx/registry\");\nimport structure = require(\"sdmx/structure\");\nimport message = require(\"sdmx/message\");\nimport commonreferences = require(\"sdmx/commonreferences\");\nimport common = require(\"sdmx/common\");\nimport sdmx = require(\"sdmx\");\nimport data = require(\"sdmx/data\");\nimport time = require(\"sdmx/time\");\nexport function parseXml(s: string): any {\n    var parseXml: DOMParser;\n    parseXml = new DOMParser();\n    var xmlDoc = parseXml.parseFromString(s, \"text/xml\");\n    return xmlDoc;\n}\nexport class NOMISRESTServiceRegistry implements interfaces.RemoteRegistry, interfaces.Queryable {\n\n    private agency: string = \"NOMIS\";\n    private serviceURL: string = \"http://www.nomisweb.co.uk/api\";\n    private options: string = \"uid=0xad235cca367972d98bd642ef04ea259da5de264f\";\n    private local: interfaces.LocalRegistry = new registry.LocalRegistry();\n\n    private dataflowList: Array<structure.Dataflow> = null;\n\n    public throttle(fn, threshhold, scope) {\n        threshhold || (threshhold = 250);\n        var last,\n            deferTimer;\n        return function() {\n            var context = scope || this;\n\n            var now = +new Date,\n                args = arguments;\n            if (last && now < last + threshhold) {\n                // hold on to it\n                clearTimeout(deferTimer);\n                deferTimer = setTimeout(function() {\n                    last = now;\n                    fn.apply(context, args);\n                }, threshhold);\n            } else {\n                last = now;\n                fn.apply(context, args);\n            }\n        };\n    }\n    getRemoteRegistry(): interfaces.RemoteRegistry {\n        return this;\n    }\n\n    getRepository(): interfaces.Repository {\n        return null;\n\n    }\n\n    clear() {\n        this.local.clear();\n    }\n    query(q: data.Query): Promise<message.DataMessage> {\n        var flow: structure.Dataflow = q.getDataflow();\n        var startTime = q.getStartDate();\n        var endTime = q.getEndDate();\n        var geogIndex: number = flow.getId().toString().lastIndexOf(\"_\");\n        var geog: string = flow.getId().toString().substring(geogIndex + 1, flow.getId().toString().length);\n        var geography_string: string = \"&geography=\" + geog;\n        if (\"NOGEOG\" == geog) {\n            geography_string = \"\";\n        }\n        var id: string = flow.getId().toString().substring(0, geogIndex);\n        var dst_ref: commonreferences.Ref = new commonreferences.Ref();\n        dst_ref.setAgencyId(flow.getAgencyId());\n        dst_ref.setId(new commonreferences.ID(id));\n        dst_ref.setVersion(flow.getVersion());\n        var dst_reference = new commonreferences.Reference(dst_ref, null);\n        var st: Promise<message.StructureType> = this.retrieve(this.getServiceURL() + \"/v01/dataset/\" + id + \"/time/def.sdmx.xml\");\n        return <Promise<message.DataMessage>>st.then(function(struc: message.StructureType) {\n            var times: string = \"&TIME=\";\n            var timeCL: structure.Codelist = struc.getStructures().getCodeLists().getCodelists()[0];\n            var comma: boolean = true;\n            for (var i: number = 0; i < timeCL.size(); i++) {\n                var rtp: time.RegularTimePeriod = time.TimeUtil.parseTime(\"\", timeCL.getItems()[i].getId().toString());\n                var ts = moment(rtp.getStart());\n                var te = moment(rtp.getEnd());\n                var startMoment = moment(startTime);\n                var endMoment = moment(endTime);\n                if (ts.isBetween(startMoment, endMoment)) {\n                    //console.log(timeCL.getItems()[i].getId().toString() + \" is between \" + startTime + \" and \" + endTime);\n                    if (!comma) {\n                        times += \",\";\n                        comma = true;\n                    }\n                    times += timeCL.getItem(i).getId().toString();\n                    comma = false;\n                } else {\n                    console.log(timeCL.getItems()[i].getId().toString() + \" is not between \" + startTime + \" and \" + endTime);\n                }\n            }\n            var queryString: string = \"\";\n            var kns = q.getKeyNames();\n            for (var i: number = 0; i < kns.length; i++) {\n                var name: string = kns[i];\n                var values = q.getQueryKey(kns[i]).getValues();\n                if (i == 0) {\n                    queryString += \"?\";\n                } else {\n                    queryString += \"&\";\n                }\n                queryString += name + \"=\";\n                for (var j: number = 0; j < values.length; j++) {\n                    queryString += values[j];\n                    if (j < values.length - 1) {\n                        queryString += \",\";\n                    }\n                }\n            }\n            return this.retrieveData(flow, \"http://www.nomisweb.co.uk/api/v01/dataset/\" + dst_ref.getId() + \".compact.sdmx.xml\" + queryString + times + \"&\" + this.options);\n        }.bind(this));\n        /*\n        StringBuilder q = new StringBuilder();\n        for (int i = 0; i < structure.getDataStructureComponents().getDimensionList().size(); i++) {\n            DimensionType dim = structure.getDataStructureComponents().getDimensionList().getDimension(i);\n            boolean addedParam = false;\n            String concept = dim.getConceptIdentity().getId().toString();\n            List<String> params = message.getQuery().getDataWhere().getAnd().get(0).getDimensionParameters(concept);\n            System.out.println(\"Params=\" + params);\n            if (params.size() > 0) {\n                addedParam = true;\n                q.append(concept + \"=\");\n                for (int j = 0; j < params.size(); j++) {\n                    q.append(params.get(j));\n                    if (j < params.size() - 1) {\n                        q.append(\",\");\n                    }\n                }\n            }\n            if (addedParam && i < structure.getDataStructureComponents().getDimensionList().size() - 1) {\n                q.append(\"&\");\n            }\n            addedParam = false;\n        }\n        DataMessage msg = null;\n        msg = query(pparams, getServiceURL() + \"/v01/dataset/\" + id + \".compact.sdmx.xml?\" + q + \"&time=\" + times.toString() + geography_string +\"&\" + options);\n        */\n        //return null;\n    }\n    constructor(agency: string, service: string, options: string) {\n        if (service != null) {\n            this.serviceURL = service;\n        } else {\n\n        }\n        if (agency != null) {\n            this.agency = agency;\n        }\n        if (options != null) {\n            this.options = options;\n        }\n    }\n\n    load(struct: message.StructureType) {\n        console.log(\"nomis load\");\n        this.local.load(struct);\n    }\n\n    unload(struct: message.StructureType) {\n        this.local.unload(struct);\n    }\n    makeRequest(opts): Promise<string> {\n        return new Promise<string>(function(resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            console.log(\"nomis retrieve:\" + opts.url);\n            xhr.open(opts.method, opts.url);\n            xhr.onload = function() {\n                if (this.status >= 200 && this.status < 300) {\n                    resolve(xhr.responseText);\n                } else {\n                    reject({\n                        status: this.status,\n                        statusText: xhr.statusText\n                    });\n                }\n            };\n            xhr.onerror = function() {\n                reject({\n                    status: this.status,\n                    statusText: xhr.statusText\n                });\n            };\n            if (opts.headers) {\n                Object.keys(opts.headers).forEach(function(key) {\n                    xhr.setRequestHeader(key, opts.headers[key]);\n                });\n            }\n            var params = opts.params;\n            // We'll need to stringify if we've been given an object\n            // If we have a string, this is skipped.\n            if (params && typeof params === 'object') {\n                params = Object.keys(params).map(function(key) {\n                    return encodeURIComponent(key) + '=' + encodeURIComponent(params[key]);\n                }).join('&');\n            }\n            xhr.send(params);\n        });\n    }\n    \n    /*\n     * Modified to always resolve\n     * \n     */\n    makeRequest2(opts): Promise<string> {\n        return new Promise<string>(function(resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            console.log(\"nomis retrieve:\" + opts.url);\n            xhr.open(opts.method, opts.url);\n            xhr.onload = function() {\n                if (this.status >= 200 && this.status < 300) {\n                    resolve(xhr.responseText);\n                } else {\n                    resolve(\"\");\n                }\n            };\n            xhr.onerror = function() {\n                resolve(\"\");\n            };\n            if (opts.headers) {\n                Object.keys(opts.headers).forEach(function(key) {\n                    xhr.setRequestHeader(key, opts.headers[key]);\n                });\n            }\n            var params = opts.params;\n            // We'll need to stringify if we've been given an object\n            // If we have a string, this is skipped.\n            if (params && typeof params === 'object') {\n                params = Object.keys(params).map(function(key) {\n                    return encodeURIComponent(key) + '=' + encodeURIComponent(params[key]);\n                }).join('&');\n            }\n            xhr.send(params);\n        });\n    }\n    public retrieve(urlString: string): Promise<message.StructureType> {\n        var s: string = this.options;\n        if (urlString.indexOf(\"?\") == -1) {\n            s = \"?\" + this.options + \"&random=\" + new Date().getTime();\n        } else {\n            s = \"&\" + this.options + \"&random=\" + new Date().getTime();\n        }\n        var opts: any = {};\n        opts.url = urlString + s;\n        opts.method = \"GET\";\n        opts.headers = { \"Connection\": \"close\" ,\n         \"Origin\": document.location};\n        return this.makeRequest(opts).then(function(a) {\n            return sdmx.SdmxIO.parseStructure(a);\n        });\n    }\n    public retrieveData(dataflow: structure.Dataflow, urlString: string): Promise<message.DataMessage> {\n        var s: string = this.options;\n        if (urlString.indexOf(\"?\") == -1) {\n            s = \"?\" + s + \"&random=\" + new Date().getTime();\n        } else {\n            s = \"&\" + s + \"&random=\" + new Date().getTime();\n        }\n        var opts: any = {};\n        opts.url = urlString + s;\n        opts.method = \"GET\";\n        opts.headers = { \"Connection\": \"close\",\"Origin\": document.location};\n        return this.makeRequest(opts).then(function(a) {\n            var dm = sdmx.SdmxIO.parseData(a);\n            var payload = new common.PayloadStructureType();\n            payload.setStructure(dataflow.getStructure());\n            dm.getHeader().setStructures([payload]);\n            return dm;\n        });\n    }\n    public retrieve2(urlString: string, vals: any): Promise<any> {\n        console.log(\"nomis retrieve:\" + urlString);\n        var s: string = this.options;\n        if (urlString.indexOf(\"?\") == -1) {\n            s = \"?\" + s + \"&random=\" + new Date().getTime();\n        } else {\n            s = \"&\" + s + \"&random=\" + new Date().getTime();\n        }\n        var opts: any = {};\n        opts.url = urlString;\n        opts.method = \"GET\";\n        opts.headers = { \"Connection\": \"close\" };\n        return this.makeRequest2(opts).then(function(a) {\n            var pack = { string: a };\n            for (var i: number = 0; i < Object.keys(vals).length; i++) {\n                var k = Object.keys(vals)[i];\n                pack[k] = vals[k];\n            }\n            return pack;\n        });\n    }\n    /*\n      This function ignores the version argument!!!\n      ILO stat does not use version numbers.. simply take the latest\n     */\n\n    public findDataStructure(ref: commonreferences.Reference): Promise<structure.DataStructure> {\n        var dst: structure.DataStructure = this.local.findDataStructure(ref);\n        if (dst != null) {\n            var promise1 = new Promise<structure.DataStructure>(function(resolve, reject) {\n                resolve(dst);\n            }.bind(this));\n            return promise1;\n        } else {\n            var geogIndex = ref.getMaintainableParentId().toString().lastIndexOf(\"_\");\n            var geog: string = ref.getMaintainableParentId().toString().substring(geogIndex + 1, ref.getMaintainableParentId().toString().length);\n            var geography_string: string = \"geography=\" + geog;\n            if (\"NOGEOG\" == geog) {\n                geography_string = \"\";\n            }\n            var id: string = ref.getMaintainableParentId().toString().substring(0, geogIndex);\n            return <Promise<structure.DataStructure>>this.retrieve(this.getServiceURL() + \"/v01/dataset/\" + id + \".structure.sdmx.xml?\" + geography_string).then(function(a) {\n                a.getStructures().getDataStructures().getDataStructures()[0].setId(ref.getMaintainableParentId());\n                a.getStructures().getDataStructures().getDataStructures()[0].setVersion(ref.getVersion());\n                this.load(a);\n                return this.local.findDataStructure(ref);\n            }.bind(this));\n        }\n    }\n    public listDataflows(): Promise<Array<structure.Dataflow>> {\n        if (this.dataflowList != null) {\n            var promise1 = new Promise<Array<structure.Dataflow>>(function(resolve, reject) {\n                resolve(this.dataflowList);\n            }.bind(this));\n            return promise1;\n        } else {\n            var dfs: Array<structure.Dataflow> = [];\n            var th = this;\n            var promise2: any = this.retrieve(this.serviceURL + \"/v01/dataset/def.sdmx.xml\").then(function(st: message.StructureType) {\n                var packArray = [];\n                var list: Array<structure.DataStructure> = st.getStructures().getDataStructures().getDataStructures();\n                for (var i: number = 0; i < list.length; i++) {\n                    var dst: structure.DataStructure = list[i];\n                    var cubeId: string = structure.NameableType.toIDString(dst);\n                    var cubeName: string = dst.findName(\"en\").getText();\n                    var url: string = th.serviceURL + \"/v01/dataset/\" + cubeId + \".overview.xml\";\n                    var pack = { cubeId: cubeId, cubeName: cubeName, url: url };\n                    packArray.push(pack);\n                }\n                return packArray;\n            });\n            return promise2.map(function(item, index, length) {\n                var pack = item;\n                return th.retrieve2(pack.url, pack).then(function(pack) {\n                    var cubeId2: string = pack.cubeId;\n                    var cubeName2: string = pack.cubeName;\n                    var url2: string = pack.url;\n                    var doc: string = pack.string;\n                    var parsedDataflows = [];\n                    try {\n                        var geogList: Array<NOMISGeography> = th.parseGeography(doc, cubeId2, cubeName2);\n                        for (var j = 0; j < geogList.length; j++) {\n                            var dataFlow: structure.Dataflow = new structure.Dataflow();\n                            dataFlow.setAgencyId(new commonreferences.NestedNCNameID((th.agency)));\n                            dataFlow.setId(new commonreferences.ID(cubeId2 + \"_\" + geogList[j].getGeography()));\n                            var name: common.Name = new common.Name(\"en\", cubeName2 + \" \" + geogList[j].getGeographyName());\n                            var names: Array<common.Name> = [];\n                            names.push(name);\n                            dataFlow.setNames(names);\n                            var ref: commonreferences.Ref = new commonreferences.Ref();\n                            ref.setAgencyId(new commonreferences.NestedNCNameID(th.agency));\n                            ref.setMaintainableParentId(dataFlow.getId());\n                            ref.setVersion(commonreferences.Version.ONE);\n                            var reference = new commonreferences.Reference(ref, null);\n                            dataFlow.setStructure(reference);\n                            parsedDataflows.push(dataFlow);\n                        }\n                        if (geogList.length == 0) {\n                            var dataFlow: structure.Dataflow = new structure.Dataflow();\n                            dataFlow.setAgencyId(new commonreferences.NestedNCNameID((th.agency)));\n                            dataFlow.setId(new commonreferences.ID(cubeId2 + \"_NOGEOG\"));\n                            var name: common.Name = new common.Name(\"en\", cubeName2);\n                            var names: Array<common.Name> = [];\n                            names.push(name);\n                            dataFlow.setNames(names);\n                            var ref: commonreferences.Ref = new commonreferences.Ref();\n                            ref.setAgencyId(new commonreferences.NestedNCNameID(th.agency));\n                            ref.setMaintainableParentId(dataFlow.getId());\n                            ref.setVersion(commonreferences.Version.ONE);\n                            var reference = new commonreferences.Reference(ref, null);\n                            dataFlow.setStructure(reference);\n                            parsedDataflows.push(dataFlow);\n                        }\n                    } catch (error) {\n                        console.log(\"error!:\" + error);\n                    }\n                    return parsedDataflows;\n                });\n            }, { concurrency: 5 }).delay(1300).then(function(stuff) {\n                // works with delay of 1000, put 1300 to be safe =D\n                var dfs = [];\n                for (var i: number = 0; i < stuff.length; i++) {\n                    for (var j: number = 0; j < stuff[i].length; j++) {\n                        dfs.push(stuff[i][j]);\n                    }\n                }\n                this.dataflowList = dfs;\n                return dfs;\n            }.bind(this));\n        }\n    }\n\n    public getServiceURL(): string {\n        return this.serviceURL;\n    }\n    public parseGeography(doc: string, cubeId: string, cubeName: string): Array<NOMISGeography> {\n        var geogList: Array<NOMISGeography> = [];\n        var tagContent: string = null;\n        var lastLang: string = null;\n        var xmlDoc = parseXml(doc);\n        var dimNode = this.findNodeName(\"Dimensions\", xmlDoc.documentElement.childNodes);\n        if (dimNode == null) {\n            return geogList;\n        }\n        var dimsNode = this.searchNodeName(\"Dimension\", dimNode.childNodes);\n        if (dimsNode == null || dimsNode.length == 0) {\n            return geogList;\n        }\n        var geogNode = null;\n        for (var i = 0; i < dimsNode.length; i++) {\n            if (dimsNode[i].getAttribute(\"concept\") == \"geography\") {\n                geogNode = dimsNode[i];\n            }\n        }\n        if (geogNode == null) return geogList;\n        var typesNode = this.findNodeName(\"Types\", geogNode.childNodes);\n        if (typesNode == null) return geogList;\n        var typeArray = this.searchNodeName(\"Type\", typesNode.childNodes);\n        if (typeArray.length == 0) {\n            return geogList;\n        }\n        for (var i: number = 0; i < typeArray.length; i++) {\n            var ng: NOMISGeography = new NOMISGeography(typeArray[i].getAttribute(\"value\"), typeArray[i].getAttribute(\"name\"), cubeName, cubeId);\n            geogList.push(ng);\n        }\n        return geogList;\n    }\n    recurseDomChildren(start: any, output: any) {\n        var nodes;\n        if (start.childNodes) {\n            nodes = start.childNodes;\n            this.loopNodeChildren(nodes, output);\n        }\n    }\n\n    loopNodeChildren(nodes: Array<any>, output: any) {\n        var node;\n        for (var i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            if (output) {\n                this.outputNode(node);\n            }\n            if (node.childNodes) {\n                this.recurseDomChildren(node, output);\n            }\n        }\n    }\n    outputNode(node: any) {\n        var whitespace = /^\\s+$/g;\n        if (node.nodeType === 1) {\n            console.log(\"element: \" + node.tagName);\n        } else if (node.nodeType === 3) {\n            //clear whitespace text nodes\n            node.data = node.data.replace(whitespace, \"\");\n            if (node.data) {\n                console.log(\"text: \" + node.data);\n            }\n        }\n    }\n    findNodeName(s: string, childNodes: any) {\n        for (var i: number = 0; i < childNodes.length; i++) {\n            var nn: string = childNodes[i].nodeName;\n            //alert(\"looking for:\"+s+\": name=\"+childNodes[i].nodeName);\n            if (nn.indexOf(s) == 0) {\n                //alert(\"found node:\"+s);\n                return childNodes[i];\n            }\n        }\n        return null;\n    }\n    searchNodeName(s: string, childNodes: any): Array<any> {\n        var result: Array<any> = [];\n        for (var i: number = 0; i < childNodes.length; i++) {\n            var nn: string = childNodes[i].nodeName;\n            //alert(\"looking for:\"+s+\": name=\"+childNodes[i].nodeName);\n            if (nn.indexOf(s) == 0) {\n                //alert(\"found node:\"+s);\n                result.push(childNodes[i]);\n            }\n        }\n        if (result.length == 0) {\n            //alert(\"cannot find any \" + s + \" in node\");\n        }\n        return result;\n    }\n    findDataflow(ref: commonreferences.Reference): Promise<structure.Dataflow> {\n        return null;\n    }\n    findCode(ref: commonreferences.Reference): Promise<structure.CodeType> { return null; }\n    findCodelist(ref: commonreferences.Reference): Promise<structure.Codelist> { return null; }\n    findItemType(item: commonreferences.Reference): Promise<structure.ItemType> { return null; }\n    findConcept(ref: commonreferences.Reference): Promise<structure.ConceptType> { return null; }\n    findConceptScheme(ref: commonreferences.Reference): Promise<structure.ConceptSchemeType> { return null; }\n    searchDataStructure(ref: commonreferences.Reference): Promise<Array<structure.DataStructure>> { return null; }\n    searchDataflow(ref: commonreferences.Reference): Promise<Array<structure.Dataflow>> { return null; }\n    searchCodelist(ref: commonreferences.Reference): Promise<Array<structure.Codelist>> { return null; }\n    searchItemType(item: commonreferences.Reference): Promise<Array<structure.ItemType>> { return null; }\n    searchConcept(ref: commonreferences.Reference): Promise<Array<structure.ConceptType>> { return null; }\n    searchConceptScheme(ref: commonreferences.Reference): Promise<Array<structure.ConceptSchemeType>> { return null; }\n    getLocalRegistry(): interfaces.LocalRegistry {\n        return this.local;\n    }\n    save(): any { }\n}\nexport class NOMISGeography {\n    private geography: string = \"\";\n    private geographyName: string = \"\";\n    private cubeName: string = \"\";\n    private cubeId: string = \"\";\n    constructor(geography: string, geographyName: string, cubeName: string, cubeId: string) {\n        this.geography = geography;\n        this.geographyName = geographyName;\n        this.cubeName = cubeName;\n        this.cubeId = cubeId;\n\n    }\n    getGeography() {\n        return this.geography;\n    }\n    getCubeName() { return this.cubeName; }\n    getCubeId() {\n        return this.cubeId;\n    }\n    getGeographyName() {\n        return this.geographyName;\n    }\n\n}\n"]}